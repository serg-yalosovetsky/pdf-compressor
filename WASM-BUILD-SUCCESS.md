# ‚úÖ Ghostscript WASM Build - SUCCESS!

## üéâ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Emscripten SDK
- –í–µ—Ä—Å–∏—è: 4.0.22
- –ü—É—Ç—å: `~/emsdk`

### 2. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω Ghostscript –≤ WASM
- **–ò—Å—Ö–æ–¥–Ω–∏–∫–∏:** ArtifexSoftware/ghostpdl (latest)
- **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä:** Emscripten 4.0.22
- **–í—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:** ~20 –º–∏–Ω—É—Ç

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏ (–ì–õ–ê–í–ù–û–ï!)

```bash
-sINITIAL_MEMORY=512MB      # –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–∞–º—è—Ç—å: 512 MB
-sMAXIMUM_MEMORY=2GB        # –ú–∞–∫—Å–∏–º—É–º: 2 GB  
-sALLOW_MEMORY_GROWTH=1     # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
```

**–î–æ:** ~256 MB –º–∞–∫—Å–∏–º—É–º ‚Üí –∫—Ä–∞—à –Ω–∞ 80 MB PDF  
**–ü–æ—Å–ª–µ:** 2 GB –º–∞–∫—Å–∏–º—É–º ‚Üí –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 100 MB PDF ‚úÖ

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `arch/wasm.h`:
```c
#define ARCH_ALIGN_UINT64_T_MOD 8
```

### 5. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `gs-worker.wasm` | 17 MB | WASM –º–æ–¥—É–ª—å (+4 MB –∏–∑-–∑–∞ –ø–∞–º—è—Ç–∏) |
| `gs-worker.js` | 176 KB | Emscripten glue code |

### 6. –î–µ–ø–ª–æ–π

‚úÖ –§–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ `docs/`  
‚úÖ –ó–∞–∫–æ–º–º–∏—á–µ–Ω–æ –≤ Git  
‚úÖ –ó–∞–ø—É—à–µ–Ω–æ –Ω–∞ GitHub  
‚è≥ GitHub Pages –æ–±–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ 2-5 –º–∏–Ω—É—Ç

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

**URL:** https://vakovalskii.github.io/pdf-compressor/compress-wasm.html

**–¢–µ—Å—Ç:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å PDF —Ñ–∞–π–ª 80 MB
2. –í—ã–±—Ä–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (ebook)
3. –ù–∞–∂–∞—Ç—å "–°–∂–∞—Ç—å PDF"
4. –û–∂–∏–¥–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-10 –º–∏–Ω—É—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–∂–∞—Ç–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –§–∞–π–ª —É–º–µ–Ω—å—à–∏—Ç—Å—è –Ω–∞ 70-90%
- ‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫ "memory access out of bounds"

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

### –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (13 MB WASM):
- –ú–∞–∫—Å–∏–º—É–º –ø–∞–º—è—Ç–∏: ~256 MB
- –õ–∏–º–∏—Ç —Ñ–∞–π–ª–æ–≤: ~20-30 MB
- –ö—Ä–∞—à –Ω–∞ 80 MB ‚ùå

### –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (17 MB WASM):
- –ú–∞–∫—Å–∏–º—É–º –ø–∞–º—è—Ç–∏: 2 GB
- –õ–∏–º–∏—Ç —Ñ–∞–π–ª–æ–≤: –¥–æ 100 MB
- –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 80 MB ‚úÖ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–∞–Ω–¥–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
```bash
cd /Users/v.kovalskii/pdf-compressor/ps-wasm
source ~/emsdk/emsdk_env.sh
./compile.sh --version=latest
```

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `ps-wasm/compile.sh` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ –ø–∞–º—è—Ç–∏
2. `ps-wasm/code_patch/common/arch/wasm.h` - –¥–æ–±–∞–≤–ª–µ–Ω ARCH_ALIGN_UINT64_T_MOD

### –õ–æ–≥ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
`ps-wasm/compile_output.log` (4472 —Å—Ç—Ä–æ–∫–∏)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚è≥ –î–æ–∂–¥–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è GitHub Pages (2-5 –º–∏–Ω)
2. üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ñ–∞–π–ª–µ 80 MB
3. üìù –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. üéâ Profit!

## üí° –í—ã–≤–æ–¥—ã:

- ‚úÖ WebAssembly –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –ö–ª—é—á - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- ‚úÖ Ghostscript WASM —Ç–µ–ø–µ—Ä—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π (–¥–ª—è —Ñ–∞–π–ª–æ–≤ –¥–æ 100 MB)
- ‚ö†Ô∏è –í—Å—ë –µ—â—ë –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ 5-10 —Ä–∞–∑, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

**–î–∞—Ç–∞:** 25 –¥–µ–∫–∞–±—Ä—è 2025  
**–í—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:** ~20 –º–∏–Ω—É—Ç  
**–†–∞–∑–º–µ—Ä WASM:** 17 MB  
**–õ–∏–º–∏—Ç –ø–∞–º—è—Ç–∏:** 2 GB  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

